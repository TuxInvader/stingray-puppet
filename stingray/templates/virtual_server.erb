address <%= @address.class == Array ? "\"" + (@address * "\" \"") + "\"": "\"" + @address + "\""%>
<% if @client_cas then -%>client_cas <%=@client_cas * " "%><% end %>
enabled <% if @enabled == "yes" then -%>yes<% else -%>no<% end %>
port <%= @port%>
<% if @ssl_certificate -%>
private_key <%= @ssl_certificate%>.private
public_cert <%= @ssl_certificate%>.public
<% end -%>
protocol <%= @proto_code %>
<% if @enable_logging -%>
log!enabled     Yes
log!filename    <%= @log_filename %>
log!format      <%= @log_format %>
<% end -%>
<% if @max_client_buffer then -%>
max_client_buffer       <%= @max_client_buffer %>
<% end -%>
<% if @ssl_decrypt == "yes" then -%>ssl_decrypt Yes
ssl_ocsp!issuer!_DEFAULT_!aia	Yes
ssl_ocsp!issuer!_DEFAULT_!nonce	off
ssl_ocsp!issuer!_DEFAULT_!required	optional
ssl_ocsp!issuer!_DEFAULT_!responder_cert
ssl_ocsp!issuer!_DEFAULT_!signer
ssl_ocsp!issuer!_DEFAULT_!url<% end %>
pool <%= @pool.class == Array ? @pool * " " : @pool%>
<% if @response_rules then-%>
responserules <%= @response_rules.class == Array ? "\"" + (@response_rules * "\" \"") + "\"" : "\"" + @response_rules  + "\""%>
<% end %>
<% if @request_rules then -%>
rules <%= @request_rules.class == Array ? "\"" + (@request_rules * "\" \"") + "\"" : "\"" + @request_rules  + "\""%>
<% end %>
<% if @protection then -%>
protection  <%= @protection %>
<% end -%>
<% if @bandwidth then -%>
bandwidth_class  <%= @bandwidth %>
<% end -%>
<% if @timeout -%>timeout <%= @timeout %><% end %>
<% if @connect_timeout -%>connect_time  <%= @connect_timeout %><% end %>
webcache!enabled   <%= @caching %>
gzip!enabled   <%= @compression %>
<% if @compression_level then -%>
gzip!compresslevel  <%= @compression_level %>
<% end -%>
<% if @aptimizer_express_code == "yes" then -%>
aptimizer!enabled Yes
<% end -%>
<% unless @ssl_sites.class == NilClass then @ssl_sites.each do |hostname,certificate|-%>
<%="ssl_sites!#{hostname}!private_key     #{certificate}.private"%>
<%="ssl_sites!#{hostname}!public_cert     #{certificate}.public"%>
<%end end-%>
